ScreenManager:
    CustomerBrowse:

<CustomerBrowse>
    name:"customerbrowse"
    BoxLayout:
        orientation: "vertical"
        canvas.before:
            Color:
                rgba: (2/255, 14/255, 25/255,1)
            Rectangle:
                pos:self.pos
                size:self.size

        MDTopAppBar:
            id:bar
            title: "PURCHASE BOTTLES"
            left_action_items:[["arrow-left", lambda x: root.topbar_close2()  ,"Exit"]]
            right_action_items: [["cart", lambda x: root.cart_screen(),"Cart"]]
            
            

        MDBottomNavigation:
            panel_color: 184/255, 190/255, 195/255,1
            id:bottom_nav
                    

            MDBottomNavigationItem:
                name: 'water'
                text: 'Water'
                icon: 'water'
                icon_size: "36dp"

                MDLabel:
                    text:"ORDER WATER"
                    theme_text_color:"Custom"
                    text_color: 21/255,39/255,112/255,1
                    pos_hint: {"center_x": .5, "center_y": .95} 
                    halign:"center"
                    font_size:"45sp"
                    font_style:"H4"
                    height:"15dp"
                
                MDLabel:
                    id:water_price
                    text:"Water is priced at only Ksh.10 per litre."
                    theme_text_color:"Custom"
                    text_color: 21/255,39/255,112/255,1
                    pos_hint: {"center_x": .5, "center_y": .82} 
                    halign:"center"
                    font_size:"30sp"
                    font_style:"H6"
                    height:"15dp"

                BoxLayout:
                    size_hint:.9,None
                    height:"30dp"
                    pos_hint: {"center_x": .5, "center_y": .68}
                    spacing:"5dp"

                    MDLabel:
                        id:sales_entry
                        text:"Bottle Size(litres)"
                        size_hint_x: 1
                        pos_hint: {"center_x": .7, "center_y": .5}
                        font_size:"25sp"
                        font_style:"H6"
                        
                        
                    MDTextField:
                        id:field2
                        mode:"fill"
                        fill_color: 0, 1, 0, 1
                        pos_hint: {"center_x": .3, "center_y": .5}
                        size_hint_x: 1
                        width: "160dp"
                        hint_text: "Bottle size"
                        color_mode:"accent"
                        on_focus: if self.focus: root.dropdown2()

                BoxLayout:
                    size_hint:.9,None
                    height:"30dp"
                    pos_hint: {"center_x": .5, "center_y": .52}
                    spacing:"5dp"

                    MDLabel:
                        id:sales_entry
                        #mode:"fill"
                        text:"Bottle Amount"
                        size_hint_x: 1
                        pos_hint: {"center_x": .7, "center_y": .5}
                        font_size:"25sp"
                        font_style:"H6"
                        #on_text:root.sales_input_check()
                        
                    MDTextField:
                        id:amount_field
                        mode:"fill"
                        fill_color: 0, 1, 0, 1
                        pos_hint: {"center_x": .3, "center_y": .5}
                        size_hint_x: 1
                        width: "160dp"
                        hint_text: "Bottle Amount"
                        color_mode:"accent"
                        on_text:root.entry_warning()

                MDLabel:
                    text:"Would you like to purchase or exchange your bottle?"
                    theme_text_color:"Custom"
                    text_color: 21/255,39/255,112/255,1
                    pos_hint: {"center_x": .5, "center_y": .37} 
                    halign:"center"
                    font_size:"30sp"
                    font_style:"H6"
                    height:"15dp"
                
                BoxLayout:
                    size_hint:.85,None
                    height:"30dp"
                    pos_hint: {"center_x": .5, "center_y": .27}
                    spacing:"5dp"

                    MDCheckbox:
                        group:"checkbox_group"
                        id:checkbox3
                        on_active:root.checkbox_checked2()
                        size_hint:None,None
                        height:"30dp"
                        width: "30dp"
                        pos_hint: {"center_x": .5, "center_y": .5}
                        

                    MDLabel:
                        text:"[ref=Show Password]Purchase[/ref]"
                        markup:True
                        pos_hint: {"center_x": .5, "center_y": .5}

                    MDCheckbox:
                        group:"checkbox_group"
                        id:checkbox4
                        on_active:root.checkbox_checked2()
                        size_hint:None,None
                        height:"30dp"
                        width: "30dp"
                        pos_hint: {"center_x": .5, "center_y": .5}

                    
                    MDLabel:
                        text:"[ref=Show Password]Exchange [/ref]"
                        markup:True
                        pos_hint: {"center_x": .5, "center_y": .5}
                
                MDLabel:
                    id: checkbox_error
                    halign: 'center'
                    pos_hint:{'center_y':0.18}
                    theme_text_color: 'Error'
                    text: ''

                MDRaisedButton:
                    id:submit_order
                    size_hint: .7,.01
                    disabled:False
                    text:"CHECKOUT "
                    theme_text_color:"Custom"
                    text_color: 0,0,0,1
                    pos_hint:{'center_x':0.5, 'center_y':0.1}
                    on_press:root.add_to_cart2()
                                        

            

                
                
                
            MDBottomNavigationItem:
                name: 'bottles'
                text: 'Bottles'
                icon: 'bottle-soda'

                ScrollView:
                    
                    GridLayout:
                        size_hint_y:None
                        cols:2
                        spacing:"30dp"
                        padding:"20dp"
                        height:self.minimum_height
                        width:self.minimum_width
                        
                        
                        ItemCard:
                            image:"images/1l.jpg"
                            rating:"1L Bottle"
                            price:"KSH.40"
                            
                        ItemCard:
                            image:"images/5l.jpg"
                            rating:"5L Bottle"
                            price:"KSH.100"
                            
                        ItemCard:
                            image:"images/10l.jpg"
                            rating:"1OL Bottle"
                            price:"KSH.150"
                        ItemCard:
                            image:"images/189.jpg"
                            rating:"18.9L Bottle"
                            price:"KSH.250"
                        ItemCard:
                            image:"images/20l.jpeg"
                            rating:"20L Bottle"
                            price:"300"
                        ItemCard:
                            image:"images/20lKeringet.jpg"
                            rating:"20L Hard Bottle"
                            price:"KSH.1300"

                       
                          

                 
            MDBottomNavigationItem:
                name: 'account'
                text: 'Order'
                icon: 'account-check'
                icon_size: "36dp"
                BoxLayout:
                    orientation: "vertical"
                    

                    MDFloatLayout:
                        MDLabel:
                            id:shop_name
                            text:"Shop Name"
                            font_style:"H4"
                            theme_text_color:"Custom"
                            text_color: 21/255,39/255,112/255,1
                            halign:"center"
                            pos_hint:{'center_y':0.9}
                            
                        MDLabel:
                            id:seller_phn_number
                            text:"Phone Number"
                            font_style:"H4"
                            theme_text_color:"Custom"
                            text_color: 21/255,39/255,112/255,1
                            halign:"center"
                            pos_hint:{'center_y':0.8}
                            
                        MDLabel:
                            id:seller_id
                            text:"Seller ID"
                            font_style:"H4"
                            theme_text_color:"Custom"
                            text_color: 21/255,39/255,112/255,1
                            halign:"center"
                            pos_hint:{'center_y':0.7}
                            
                        MDLabel:
                            id:items_ord
                            text:"Orders"
                            font_style:"H4"
                            halign:"center"
                            pos_hint:{'center_y':0.54}
                            theme_text_color:"Custom"
                            text_color: 0,0,0,1
                        ScrollView:
                            size_hint_y: 0.5  # Set the height hint to 0.5 (half of the screen)
                            BoxLayout:
                                id: order_container
                                orientation: "vertical"
                                size_hint_y: None
                                height: self.minimum_height

                                TwoLineListItem:
                                    text: "Two-line item"
                                    secondary_text: "Secondary text here"

                                TwoLineListItem:
                                    text: "Two-line item"
                                    secondary_text: "Secondary text here"

                                TwoLineListItem:
                                    text: "Two-line item"
                                    secondary_text: "Secondary text here"

                                

                    
            MDBottomNavigationItem:
                name: 'help'
                text: 'Contact'
                icon: 'help-circle'
                icon_size: "36dp"

                MDFloatLayout:
                    id:my_layout3
                        
                    MDLabel:
                        text:"UPDATE DETAILS"
                        font_style:"H4"
                        halign:"center"
                        pos_hint:{'center_y':0.94}
                        theme_text_color:"Custom"
                        text_color: 0,0,1,1
                    
                    MDTextField:
                        id: email_customer_signup
                        hint_text: 'Enter your email'
                        hint_text_color_normal: 0, 0, 0, 1  
                        icon_right:"email"
                        font_size:"16dp"
                        size_hint_x: .85
                        pos_hint: {"center_x": .5, "center_y": .82}
                        on_text:self.text=self.text.replace(" ","")
                        write_tab:False
                        on_text:root.validate_customer_email2()
                    MDLabel:
                        id: email_customer_signup_error
                        halign: 'center'
                        pos_hint:{'center_y':0.77}
                        theme_text_color: 'Error'
                        text: ''

                    MDTextField:
                        id: customer_phone_no
                        hint_text: 'Phone Number'
                        hint_text_color_normal: 0, 0, 0, 1 
                        icon_right:"cellphone-check"
                        font_size:"16dp"
                        size_hint_x: .85
                        pos_hint: {"center_x": .5, "center_y": .72}
                        on_text:self.text=self.text.replace(" ","")
                        write_tab:False
                        on_text:root.validate_phone_no()
                    MDLabel:
                        id: customer_phone_no_error
                        halign: 'center'
                        pos_hint:{'center_y':0.67}
                        theme_text_color: 'Error'
                        text: ''

                    MDTextField:
                        id: customer_first_name
                        hint_text: 'First Name'
                        hint_text_color_normal: 0, 0, 0, 1 
                        icon_right:"account"
                        font_size:"16dp"
                        size_hint_x: .85
                        pos_hint: {"center_x": .5, "center_y": .62}
                        on_text:self.text=self.text.replace(" ","")
                        write_tab:False
                        on_text:root.validate_first_name()
                    MDLabel:
                        id: customer_first_name_error
                        halign: 'center'
                        pos_hint:{'center_y':0.52}
                        theme_text_color: 'Error'
                        text: ''

                    MDTextField:
                        id: customer_last_name
                        hint_text: 'Last Name'
                        hint_text_color_normal: 0, 0, 0, 1 
                        icon_right:"account"
                        font_size:"16dp"
                        size_hint_x: .85
                        pos_hint: {"center_x": .5, "center_y": .52}
                        on_text:self.text=self.text.replace(" ","")
                        write_tab:False
                        on_text:root.validate_last_name()
                    MDLabel:
                        id: customer_last_name_error
                        halign: 'center'
                        pos_hint:{'center_y':0.47}
                        theme_text_color: 'Error'
                        text: ''

                    MDTextField:
                        id: customer_pswd_signup
                        hint_text: "Password"
                        hint_text_color_normal: 0, 0, 0, 1 
                        helper_text: "Minimum of 4 characters"
                        helper_text_mode: "on_focus"
                        password:True
                        icon_right:"eye-off"
                        font_size:"16dp"
                        size_hint_x: .85
                        pos_hint: {"center_x": .5, "center_y": .4}
                        on_text:self.text=self.text.replace(" ","")
                        write_tab:False
                        on_text:root.validate_password2()
                    MDLabel:
                        id: customer_pswd_signup_error
                        halign: 'center'
                        pos_hint:{'center_y':0.35}
                        theme_text_color: 'Error'
                        text: ''
                    
                    MDTextField:
                        id: customer_pswd_confirm
                        hint_text: "Confirm Password"
                        hint_text_color_normal: 0, 0, 0, 1 
                        helper_text: "Minimum of 4 characters"
                        helper_text_mode: "on_focus"
                        password:True
                        icon_right:"eye-off"
                        font_size:"16dp"
                        size_hint_x: .85
                        pos_hint: {"center_x": .5, "center_y": .28}
                        on_text:self.text=self.text.replace(" ","")
                        write_tab:False
                        on_text:root.validate_password3()
                    MDLabel:
                        id: customer_pswd_confirm_error
                        halign: 'center'
                        pos_hint:{'center_y':0.22}
                        theme_text_color: 'Error'
                        text: ''


                    MDRaisedButton:
                        size_hint: .5,.01
                        id:submit_button3
                        disabled:False
                        text:"UPDATE"
                        theme_text_color:"Custom"
                        text_color: 0,0,0,1
                        pos_hint:{'center_x':0.5, 'center_y':0.1}
                        on_press:if root.update_validate():root.email_dialog()
                    





<ContentCustomSheet@BoxLayout>:
    orientation: "vertical"
    size_hint_y: None
    height: "750dp"
    image:""
    price:""
    rating:""
    num:"0"

    RelativeLayout:
        ItemCard:
            pos_hint:{"x":.05,"y":.4}
            image:root.image
            price:root.price
            rating:root.rating

    ScrollView:
        BoxLayout:
            orientation:"vertical"
            
            adaptive_height:True

            MDLabel:
                text:"This the latest version of our Brand with modern design."
                adaptive_height:True

            MDBoxLayout:
                adaptive_width:True
                
                MDIconButton:
                    icon:"minus"
                    pos_hint:{"center_x":.5,"center_y":.5}
                    on_release: app.root.current_screen.decrease_quantity(root)
                MDLabel:
                    id:Labe_num
                    text:root.num
                    halign:'center'
                    valign:'center'
                MDIconButton:
                    icon:'plus'
                    pos_hint:{"center_x":.5,"center_y":.5}
                    on_release: app.root.current_screen.increase_quantity(root)
                
            MDBoxLayout:
                size_hint_y: None
                height: "20dp"
                MDRoundFlatIconButton:
                    icon:"cart"
                    text:"Add to cart"
                    size_hint_x:1
                    on_press:app.root.current_screen.add_to_cart()
                MDRoundFlatIconButton:
                    icon:"cards-heart"
                    text:"Buy now"
                    size_hint_x:1
                    on_press:app.root.current_screen.add_to_cart2()
            MDBoxLayout:
                size_hint_y: None
                height: "20dp"
            
            #MDRaisedButton:
               # size_hint_x:1
                #text:"Buy now"
                #pos_hint: {"center_x": .5, "center_y": .5}
                #on_press:app.root.current_screen.add_to_cart2("profile")
#Th on _press abobve has a very important method.
#it allows you to call a method from a different class as long as its defined in that class.


                

<ItemCard@MDCard>
    orientation:"vertical"
    size_hint_x:.5
    size_hint_y:None
    height:dp(200)
    #elevation:1
    radius:25
    md_bg_color:  105/255, 84/255, 151/255, 0.8
    on_release:app.root.current_screen.show_example_custom_bottom_sheet(root.image,root.price,root.rating)

    image:""
    price:""
    rating:""

    Image:
        source:root.image
        size_hint: None, None
        size: self.parent.width, self.parent.height * 0.6
        allow_stretch: True
        keep_ratio: False

    BoxLayout:
        pos_hint:{'center_x':0.65}
        MDIcon:
            icon:"star"
            theme_text_color:'Custom'
            text_color:1,1,0,1
            halign:"center"
            size_hint_x:.25
        MDLabel:
            text:root.rating
            halign:"center"
    
    MDLabel:
        pos_hint:{'center_x':0.55}
        text:root.price



